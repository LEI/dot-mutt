---
role:
  pkg:
    - name: ispell
      os: ["darwin"]
    # - slang # or ncursea
    # - name: urlview
    #   os: ["linux"]
    - lynx
    - name: mutt
      # os: ["!darwin"]
      # eventually install -â€“with-s-lang
      # and not --with-ui=ncurses?
    # - name: neomutt/neomutt/neomutt
    #   os: ["darwin"]
    #   --disable-fcntl
    #   --with-gpgme
    # - gpgme
    - isync # Requires ~/.mbsyncrc
    # - khard
    # - msmtp # Requires ~/.msmtprc
    - mu # (maildir-utils)
    # - ripmime
    # - w3m
    # - vdirsyncer
    # - pip3 install -I urlscan
  link:
    # - ".lynxrc"
    - ".mailcap"
    - ".muttrc" # Add line to source init instead?
    - ".mutt/aliases:.mutt"
    - ".mutt/macros:.mutt"
    - ".mutt/accounts/*:.mutt/accounts"
    - ".mutt/colors/*:.mutt/colors" # Custom themes
    - ".mutt/scripts/*:.mutt/scripts"
  install:
    - "mkdir -p ~/.mutt/cache/{headers,bodies}"
    # - "mu index --maildir ~/.mail"
    # - ""
  # cron:
  #   - test -f ~/.mbsyncrc && mbsync --all # --verbose
  #   - mu index --quiet # (on update: --rebuild)
  # env:
  #   maildir: ~/.mail
  template:
    # TODO range - ".mutt/account.*.tpl"
    - source: .mbsyncrc.tpl # :.mbsyncrc
      include_vars: ~/.mailrc.yml # .mbsyncrc.tpl.local
    # - ".msmtp.tpl"
  # TODO include_vars per template
  vars:
    accounts:
      gmail:
        host: imap.gmail.com
        user: example@gmail.com
        # pass: ""
        # pass_cmd: ""
        ssl_type: IMAPS
        auth_mechs: LOGIN
        # certificate_file: ""
        patterns: INBOX
        channels:
          - name: archive
            remote: "[Gmail]/All Mail"
            local: all
          - name: drafts
            remote: "[Gmail]/Drafts"
            local: drafts
          - name: sent
            remote: "[Gmail]/Sent Mail"
            local: sent
          # - name: spam
          #   remote: "[Gmail]/Spam"
          #   local: spam
